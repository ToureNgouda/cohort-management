package sn.edacy.business;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import sn.edacy.model.Talent;
/*
 * ejb session accessible en local 
 * et a distance le nom publie dans le jndi est TalentS
 */
@Stateless(name="TalentS")   
public class TalentServiceImpl implements TalentServiceL,TalentServiceR {
	@PersistenceContext(unitName="UP_COHORT")  
	private EntityManager em;

	public void addTalent(Talent t) {
		if(t.getAge()==0 & t.getFullName()==null) throw new RuntimeException("veillez entrer tous les champs svp");
		em.persist(t);    //permet d'enregistrer un talent dans la base de donnee
		
	}

	public Talent getTalent(Long idTalent) {
		Talent t=em.find(Talent.class, idTalent); //permet de charger un talent a partir de la base de donne en sachant sa clePIMAIRE
		if(t==null) throw new RuntimeException("Ce Talent n'existe pas");
		return t;
	}

	public void updateTalent(Talent t) {
		em.merge(t);  //mettre un talent a jour un talent dans la base de donnee
		
	}

	public void DeleteTalent(Long idTalent) {
		Talent t=getTalent(idTalent);
		em.remove(t);    //supprime un talent dans la base 
		
	}

}
